# File: aerospace_scoring/seed_columns.yaml
---
# Define the columns for the output table and data extraction

output_table:
  name: "aerospace_supplier_candidates"
  description: "Tier-2 aerospace supplier candidates from UK OSM data"

identification_columns:
  - column_name: "osm_id"
    source_column: "osm_id"
    data_type: "bigint"
    description: "Original OSM object ID"

  - column_name: "osm_type"
    source_expression: "table_name"
    data_type: "varchar(50)"
    description: "Source OSM table (point/line/polygon/roads)"

  - column_name: "name"
    source_column: "name"
    data_type: "text"
    description: "Primary name of the entity"
    fallback_columns: ["operator", "brand", "company"]

  - column_name: "operator"
    source_column: "operator"
    data_type: "text"
    description: "Operating company or organization"

contact_columns:
  - column_name: "website"
    source_column: "website"
    data_type: "text"
    description: "Company website URL"
    fallback_columns: ["contact_website", "url"]

  - column_name: "phone"
    source_column: "phone"
    data_type: "text"
    description: "Contact phone number"
    fallback_columns: ["contact_phone", "telephone"]

  - column_name: "email"
    source_column: "email"
    data_type: "text"
    description: "Contact email address"
    fallback_columns: ["contact_email"]

address_columns:
  - column_name: "postcode"
    source_column: "addr_postcode"
    data_type: "varchar(20)"
    description: "UK postal code"

  - column_name: "street_address"
    source_column: "addr_street"
    data_type: "text"
    description: "Street address"

  - column_name: "city"
    source_column: "addr_city"
    data_type: "text"
    description: "City or town"
    fallback_columns: ["addr_town", "place"]

  - column_name: "county"
    source_column: "addr_county"
    data_type: "text"
    description: "County or region"
    fallback_columns: ["addr_state", "addr_region"]

classification_columns:
  - column_name: "landuse_type"
    source_column: "landuse"
    data_type: "text"
    description: "Land use classification"

  - column_name: "building_type"
    source_column: "building"
    data_type: "text"
    description: "Building type classification"

  - column_name: "industrial_type"
    source_column: "industrial"
    data_type: "text"
    description: "Specific industrial classification"
    fallback_columns: ["craft", "manufacturing"]

  - column_name: "office_type"
    source_column: "office"
    data_type: "text"
    description: "Office/business type"

descriptive_columns:
  - column_name: "description"
    source_column: "description"
    data_type: "text"
    description: "Descriptive text about the facility"

  - column_name: "brand"
    source_column: "brand"
    data_type: "text"
    description: "Brand or company name"

spatial_columns:
  - column_name: "geometry"
    source_column: "way"
    data_type: "geometry"
    description: "PostGIS geometry (points, polygons, lines)"

  - column_name: "centroid"
    source_expression: "ST_Centroid(way)"
    data_type: "geometry"
    description: "Centroid point for all geometry types"

  - column_name: "area_sqm"
    source_expression: "ST_Area(way)"
    data_type: "double precision"
    description: "Area in square meters (for polygons)"

  - column_name: "latitude"
    source_expression: "ST_Y(ST_Transform(ST_Centroid(way), 4326))"
    data_type: "double precision"
    description: "Latitude in WGS84"

  - column_name: "longitude"
    source_expression: "ST_X(ST_Transform(ST_Centroid(way), 4326))"
    data_type: "double precision"
    description: "Longitude in WGS84"

scoring_columns:
  - column_name: "aerospace_score"
    source_expression: "computed"
    data_type: "integer"
    description: "Computed aerospace relevance score"

  - column_name: "matched_keywords"
    source_expression: "computed"
    data_type: "text[]"
    description: "Array of matched aerospace keywords"

  - column_name: "confidence_level"
    source_expression: "computed"
    data_type: "varchar(20)"
    description: "Confidence level (high/medium/low)"

metadata_columns:
  - column_name: "created_at"
    source_expression: "NOW()"
    data_type: "timestamp"
    description: "Record creation timestamp"

  - column_name: "data_source"
    source_expression: "'UK OSM'"
    data_type: "varchar(50)"
    description: "Source of the data"

  - column_name: "processing_notes"
    source_expression: "computed"
    data_type: "text"
    description: "Notes about data processing and scoring"
