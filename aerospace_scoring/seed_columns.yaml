# Output table structure and column definitions

output_table:
  name: "aerospace_supplier_candidates"
  description: "Tier-2 aerospace supplier candidates from UK OSM data"
  columns:
    # Identification columns
    - name: osm_id
      type: BIGINT
      description: "Original OSM object ID"
    - name: source_table
      type: VARCHAR(50)
      description: "Source OSM table"
    - name: name
      type: TEXT
      description: "Primary name (fallback to operator or brand)"
    - name: operator
      type: TEXT
      description: "Operating company"

    # Scores & tiers
    - name: aerospace_score
      type: INTEGER
      description: "Computed aerospace relevance score"
    - name: tier_classification
      type: VARCHAR(50)
      description: "Supplier tier classification"
    - name: confidence_level
      type: VARCHAR(50)
      description: "Computed confidence level"

    # Contact information
    - name: phone
      type: TEXT
      description: "Phone number"
    - name: email
      type: TEXT
      description: "Email address"
    - name: website
      type: TEXT
      description: "Website URL"

    # Address components
    - name: postcode
      type: VARCHAR(20)
      description: "UK postal code"
    - name: street_address
      type: TEXT
      description: "Street address"
    - name: city
      type: TEXT
      description: "City (fallback to town)"

    # Industrial classification (reserved for future mapping)
    - name: landuse_type
      type: TEXT
      description: "Land use type"
    - name: building_type
      type: TEXT
      description: "Building type"
    - name: industrial_type
      type: TEXT
      description: "Industrial classification (fallback to craft)"
    - name: office_type
      type: TEXT
      description: "Office classification"

    # Descriptive information
    - name: description
      type: TEXT
      description: "Description"
    - name: matched_keywords
      type: TEXT[]
      description: "List of matched keywords"

    # Raw tags for post-processing
    - name: tags_raw
      type: HSTORE
      description: "Raw OSM tags hstore"

    # Location
    - name: latitude
      type: DOUBLE PRECISION
      description: "Centroid latitude"
    - name: longitude
      type: DOUBLE PRECISION
      description: "Centroid longitude"
    - name: geometry
      type: GEOMETRY(Point,4326)
      description: "PostGIS geometry"

    # Metadata
    - name: created_at
      type: TIMESTAMP
      description: "Record creation timestamp"
